# USB备份工具配置文件
# 版本: 1.0.0

# ============================================
# 基本配置
# ============================================

# 挂载点
MOUNT_POINT="/mnt/usb_backup"

# 备份源目录
SOURCE_DIR="/vol1"

# 备份目标目录（在挂载点内）
BACKUP_BASE_DIR="${MOUNT_POINT}/fnos_backups"

# 保留的备份数量
KEEP_BACKUPS=5

# ============================================
# USB设备检测配置
# ============================================

# USB厂商过滤器（用于lsusb匹配）
USB_VENDOR_FILTER="JMicron|SATA|USB.*Storage|ASMedia|WD|Seagate|Toshiba|Samsung"

# USB检测超时时间（秒）
USB_DETECTION_TIMEOUT=10

# 设备稳定等待时间（秒）
DEVICE_WAIT_TIME=3

# ============================================
# RAID配置
# ============================================

# RAID组装等待时间（秒）
RAID_WAIT_TIME=3

# 排除的RAID设备（系统RAID，用逗号分隔）
EXCLUDE_RAID_DEVICES="md0"

# ============================================
# LVM配置
# ============================================

# 排除的LVM卷组（系统卷组，留空则自动检测）
EXCLUDE_LVM_VG=""

# ============================================
# 虚拟机配置
# ============================================

# 自动从虚拟机释放USB设备
AUTO_RELEASE_FROM_VM=false

# 虚拟机检测（逗号分隔：qemu,virtualbox,vmware）
VM_DETECTION="qemu,virtualbox,vmware"

# ============================================
# 备份配置
# ============================================

# rsync排除规则（用空格分隔）
RSYNC_EXCLUDE_PATTERNS="
    lost+found
    @apptemp/*
    tmp/*
    *.log
    .cache/*
    .Trash-*
"

# 备份时显示进度
BACKUP_SHOW_PROGRESS=true

# 备份压缩（true/false）
BACKUP_COMPRESS=false

# 备份校验（true/false）
BACKUP_VERIFY=false

# ============================================
# 磁盘空间配置
# ============================================

# 磁盘空间安全边际（0.0-1.0，0.9表示只使用90%的可用空间）
DISK_SPACE_SAFETY_MARGIN=0.9

# 空间不足时的动作（warn|abort）
DISK_SPACE_ACTION="abort"

# ============================================
# 日志配置
# ============================================

# 日志目录
LOG_DIR="/var/log/usb-backup"

# 日志文件
LOG_FILE="${LOG_DIR}/usb-backup.log"

# 保留的日志天数
LOG_RETENTION_DAYS=30

# 调试模式（true/false）
DEBUG=false

# ============================================
# 安全配置
# ============================================

# 卸载前强制sync
UMOUNT_FORCE_SYNC=true

# 卸载超时时间（秒）
UMOUNT_TIMEOUT=30

# 设备移除前等待时间（秒）
DEVICE_REMOVE_WAIT=3

# ============================================
# 邮件通知配置（可选）
# ============================================

# 启用邮件通知
ENABLE_EMAIL_NOTIFICATION=false

# 邮件地址
EMAIL_TO=""

# SMTP服务器
SMTP_SERVER=""

# ============================================
# 高级配置
# ============================================

# 非交互模式（自动化脚本使用）
NON_INTERACTIVE=false

# 失败重试次数
RETRY_COUNT=3

# 重试延迟（秒）
RETRY_DELAY=5

# 设备超时检测（秒）
DEVICE_TIMEOUT=60

# ============================================
# 性能调优
# ============================================

# rsync线程数（0=自动）
RSYNC_THREADS=0

# I/O调度器优化
IO_SCHEDULER=""

# 同步块大小（KB）
SYNC_BLOCK_SIZE=4096

# ============================================
# 兼容性配置
# ============================================

# 文件系统检测（auto|btrfs|ext4|xfs|ntfs）
FILESYSTEM_TYPE="auto"

# 字符编码
CHARSET="UTF-8"

# 符号链接处理（copy|follow|preserve）
SYMLINK_HANDLING="preserve"

# ============================================
# 自定义钩子（可选）
# ============================================

# 挂载前执行的脚本
PRE_MOUNT_HOOK=""

# 挂载后执行的脚本
POST_MOUNT_HOOK=""

# 备份前执行的脚本
PRE_BACKUP_HOOK=""

# 备份后执行的脚本
POST_BACKUP_HOOK=""

# 卸载前执行的脚本
PRE_UMOUNT_HOOK=""

# 卸载后执行的脚本
POST_UMOUNT_HOOK=""

