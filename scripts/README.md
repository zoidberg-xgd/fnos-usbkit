# é£ç‰›OS USBå¤‡ä»½å·¥å…·

ç®€æ´é«˜æ•ˆçš„USBç§»åŠ¨ç¡¬ç›˜å¤‡ä»½è§£å†³æ–¹æ¡ˆï¼Œæ”¯æŒRAID+LVMç»“æ„ã€‚

## ğŸ“¦ åŒ…å«è„šæœ¬

| è„šæœ¬ | åŠŸèƒ½ | ç”¨é€” |
|------|------|------|
| `mount_usb_backup.sh` | æŒ‚è½½ç§»åŠ¨ç¡¬ç›˜ | è‡ªåŠ¨è¯†åˆ«RAID+LVMå¹¶æŒ‚è½½åˆ° `/mnt/usb_backup` |
| `umount_usb_backup.sh` | å®‰å…¨å¸è½½ | æ­£ç¡®åœç”¨LVMå’ŒRAIDï¼Œé¿å…æ•°æ®æŸå |
| `auto_backup_to_usb.sh` | è‡ªåŠ¨å¤‡ä»½ | å¢é‡å¤‡ä»½ `/vol1` åˆ°ç§»åŠ¨ç¡¬ç›˜ |
| `usb_backup_manager.sh` | å›¾å½¢åŒ–ç®¡ç†å™¨ | äº¤äº’å¼èœå•ï¼Œæ•´åˆæ‰€æœ‰åŠŸèƒ½ |
| `diagnose_usb_disk.sh` | ğŸ†• å¥åº·è¯Šæ–­ | æ£€æµ‹SATAæ¾åŠ¨ã€USBä¸ç¨³å®šç­‰é—®é¢˜ |

## ğŸš€ å¿«é€Ÿä½¿ç”¨

### åœ¨æœåŠ¡å™¨ä¸Šï¼ˆå·²å®‰è£…ï¼‰

```bash
# æ–¹æ³•1ï¼šå›¾å½¢åŒ–èœå•ï¼ˆæ¨èï¼‰
usb-backup

# æ–¹æ³•2ï¼šå‘½ä»¤è¡Œ
mount_usb_backup.sh      # æŒ‚è½½
auto_backup_to_usb.sh    # å¤‡ä»½
umount_usb_backup.sh     # å¸è½½

# ğŸ†• æ•…éšœè¯Šæ–­ï¼ˆç§»åŠ¨ç¡¬ç›˜æ— æ³•è¯†åˆ«æ—¶ï¼‰
diagnose_usb_disk.sh     # è‡ªåŠ¨æ£€æµ‹é—®é¢˜
```

### é‡æ–°å®‰è£…

```bash
# 1. ä¸Šä¼ è„šæœ¬
scp scripts/*.sh root@192.168.31.104:/usr/local/bin/

# 2. è®¾ç½®æƒé™
ssh root@192.168.31.104 'chmod +x /usr/local/bin/*.sh && ln -sf /usr/local/bin/usb_backup_manager.sh /usr/local/bin/usb-backup'
```

## ğŸ“– è¯¦ç»†æ–‡æ¡£

æŸ¥çœ‹æ ¹ç›®å½•çš„ `USBå¤‡ä»½å·¥å…·ä½¿ç”¨æŒ‡å—.md` è·å–å®Œæ•´è¯´æ˜ã€‚

## âš ï¸ é‡è¦æé†’

1. **æŒ‚è½½å‰æ£€æŸ¥ç‰©ç†è¿æ¥**ï¼šç¡®ä¿ç¡¬ç›˜ç›’å†…SATAçº¿è¿æ¥ç‰¢å›º
2. **ä½¿ç”¨ä¸“ç”¨æŒ‚è½½è„šæœ¬**ï¼šä¸è¦ç”¨ `mount /dev/sda1`ï¼Œå¿…é¡»ç”¨ `mount_usb_backup.sh`
3. **å®‰å…¨å¸è½½**ï¼šæ‹”å‡ºUSBå‰åŠ¡å¿…è¿è¡Œ `umount_usb_backup.sh`

## ğŸ”§ ä½ çš„ç¡¬ç›˜ç»“æ„

```
/dev/sda (JMicron JMS567 SATAæ¡¥æ¥)
â””â”€â”€ /dev/sda1 (åˆ†åŒº)
    â””â”€â”€ /dev/md126 (RAID linear)
        â””â”€â”€ /dev/trim_8ed93b3b.../0 (LVMé€»è¾‘å·)
            â””â”€â”€ btrfsæ–‡ä»¶ç³»ç»Ÿ (238GB)
```

## âœ… åŠŸèƒ½ç‰¹æ€§

- âœ… è‡ªåŠ¨æ£€æµ‹å’Œç»„è£…RAIDï¼ˆlinear/0/1/5/6/10ï¼‰
- âœ… è‡ªåŠ¨æ¿€æ´»LVMé€»è¾‘å·
- âœ… æ”¯æŒå¤šç§æ–‡ä»¶ç³»ç»Ÿï¼ˆBtrfs/ext4/xfsï¼‰
- âœ… å¢é‡å¤‡ä»½ï¼ˆrsyncï¼‰ï¼ŒèŠ‚çœæ—¶é—´å’Œç©ºé—´
- âœ… å®‰å…¨å¸è½½ï¼Œé˜²æ­¢æ•°æ®æŸå
- ğŸ†• æ™ºèƒ½è¯Šæ–­ï¼Œè‡ªåŠ¨è¯†åˆ«ç¡¬ä»¶é—®é¢˜ï¼ˆSATAæ¾åŠ¨ç­‰ï¼‰

---

*æœ€åæ›´æ–°: 2025-10-30*
